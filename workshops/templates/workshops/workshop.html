{% extends 'global/base.html' %}
{% load static %}

{% block css %}
	<link rel="stylesheet" href="{% static 'common/css/store/workshop_page/bootstrap.min.css' %}">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Adamina">
	<link rel="stylesheet" href="{% static 'common/css/store/workshop_page/Features-Clean.css' %}">
	<link rel="stylesheet" href="{% static 'common/css/store/workshop_page/Testimonials.css' %}">
{% endblock %}

{% block content %}
	    <div style="margin-top: 24px;margin-bottom: 28px;">
        <div class="container-fluid text-left">
            <div class="row text-center">
                <div class="col-md-7 col-lg-5 offset-md-0 offset-lg-1 text-center text-sm-right">
					<img class="img-thumbnail img-fluid d-inline-block align-items-lg-center" src="https://www.axoscape.com/wp-content/uploads/2020/01/workshopbilde_0.png">
					<div class="alert alert-success" role="alert"><span><strong>Description:</strong>&nbsp;<br></span>
                        <p>{{ workshop.description }}&nbsp;</p>
                    </div>
				</div>
                <div class="col-md-5 col-lg-5 shadow-sm">
                    <h3 style="font-family: Adamina, serif;margin-top: 13px;">{{ workshop.title }}&nbsp;</h3>
                    <p style="color: #282821;font-size: 22px;"><em>Best in class French Learning workshops! Textbook included!&nbsp;</em><br></p>
                    <p style="color: rgb(12,119,226);"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i></p>
					<strong style="font-size: 21px;margin-bottom: 3px;padding: 24px;">{% if workshop.discount %}Discount: {{ workshop.discount }} {% else %}Price: Rs. {{ workshop.cost }}{% endif %}<br><br></strong>
					<strong style="font-size: 18px;margin-bottom: 3px;">Date: {{ workshop.date }}<br><br></strong>
					<div class="alert alert-success" role="alert">
						<span><strong>Sessions: </strong>&nbsp;<br></span>
						<ul style="list-style-type: none">
							{% for session in workshop.sessions.all %}
								<li>Session {{ forloop.counter }}: {{ session.title }} is on {{ session.date }}</li>
							{% endfor %}
						</ul>
					</div>
					{% if not workshop.is_expired %}
						<button class="btn btn-success text-center" type="button" style="width: 100%;padding: 8px;margin: 0px;margin-top: 0px;margin-bottom: 7px;" id="buy"><i class="fas fa-user-plus"></i>&nbsp;Register Individually</button>
						<a href="{% url 'workshops:register_with_code' slug=workshop.slug %}"><button class="btn btn-outline-primary text-center" type="button" style="width: 100%;padding: 8px;margin: 0px;margin-top: 0px;margin-bottom: 7px;"><i class="fas fa-barcode"></i>&nbsp;Register with Code</button></a>
					{% else %}
						<p>This workshop has expired. Checkout upcoming ones <a href="{% url 'catalog' %}#workshops">here</a></p>
					{% endif %}
					<p class="text-center" style="color: rgb(0,0,0);margin-top: 15px;font-size: 19px;">Sharing is caring.<br><i class="fab fa-facebook"></i>&nbsp;&nbsp;<i class="fab fa-twitter"></i>&nbsp;&nbsp;<i class="fab fa-instagram"></i>&nbsp;&nbsp;<i class="fab fa-whatsapp"></i>&nbsp;&nbsp;<i class="fas fa-envelope"></i></p>
                </div>
            </div>
        </div>
    </div>
	<hr>
	<div class="features-clean">
        <div class="container">
            <div class="intro">
                <h2 class="text-center" style="padding-top: 1px;margin-bottom: 8px;">What do I get?</h2>
            </div>
            <div class="row features">
                <div class="col-sm-6 col-lg-3 item"><i class="fa fa-map-marker icon"></i>
                    <h3 class="name">Interactive Sessions</h3>
                    <p class="description">This workshop contains multiple sessions on various topics. Each session will be conducted online and will be an interactive experience that will enrich your learning experience. You will be given assignments, lectures, and other content. </p>
                </div>
                <div class="col-sm-6 col-lg-4 offset-lg-0 item"><i class="fas fa-trademark icon"></i>
                    <h3 class="name">Included Book</h3>
                    <p class="description">Le Bleu ou La Rose is an effort to make the most daunting task of learning genders of nouns in French a bit easier for the learners. Itâ€™s very important to know if a word is masculine or feminine because this affects the form of other words used with it such as an adjective, an article or a pronoun. It will not only be fun reading this book but one would also gain an easy way out to remember the genders of a noun through various keywords, mnemonics, limericks & anecdotes.<br><br></p>
                </div>
                <div class="col-sm-6 col-lg-5 offset-lg-0 item" style="width: 442px;"><i class="fas fa-laptop icon"></i><img class="img-fluid float-left rounded" src="{% static 'workshops/img/workshop-what-do-i-get.gif' %}" style="width: 398px;padding-top: 2px;"></div>
            </div>
        </div>
    </div>
    <div class="testimonials-clean" style="background-color: #f3f3f3;">
        <div class="container">
            <div class="intro">
                <h2 class="text-center" style="margin-bottom: 14px;">Reviews</h2>
            </div>
			<p>Coming soon... </p>
        </div>
		<hr>
        <div class="container" style="margin-bottom: 0px;padding-bottom: 49px;">
            <h1 class="text-center">Related workshops</h1>
            <div class="card-group">
                <div class="card"><img class="card-img-top w-100 d-block" src="{% static 'main/img/catalog/workshops-placeholder.png' %}">
                    <div class="card-body">
                        <h4 class="card-title">Coming Soon</h4>
                        <p class="card-text">We're working hard to get other workshops up and running!</p><button class="btn btn-secondary" type="button">Details</button></div>
				</div>
                <div class="card"><img class="card-img-top w-100 d-block" src="{% static 'main/img/catalog/workshops-placeholder.png' %}">
                    <div class="card-body">
                        <h4 class="card-title">Coming Soon</h4>
                        <p class="card-text">We're working hard to get other workshops up and running!</p><button class="btn btn-secondary" type="button">Details</button></div>
				</div>
                <div class="card"><img class="card-img-top w-100 d-block" src="{% static 'main/img/catalog/workshops-placeholder.png' %}">
                    <div class="card-body">
                        <h4 class="card-title">Coming Soon</h4>
                        <p class="card-text">We're working hard to get other workshops up and running!</p><button class="btn btn-secondary" type="button">Details</button></div>
				</div>
            </div>
        </div>
    </div>
    </div>
	<script id="bolt"
	src="https://checkout-static.citruspay.com/bolt/run/bolt.min.js"></script>
	<script>
		$('#buy').click(function () {

		console.log('Works?');

		{% if user.is_authenticated %}

			$.ajax({
				type: 'POST',
				url: '{{ workshop.get_absolute_url }}',
				data: {
					'workshop_id': "{{ workshop.id }}",
					'csrfmiddlewaretoken': '{{ csrf_token }}'
				},
				success: function (data, status) {
					let RequestData = {
						key: data.merchant_key,
						txnid: data.txn_id,
						hash: data.hash,
						amount: parseFloat(data.amount),
						firstname: data.first_name,
						email: data.email_id,
						phone: data.phone_number,
						productinfo: data.product_info,
						surl: data.surl,
						furl: data.furl,
						mode: 'dropout',
					};
					console.log(RequestData);
					console.log(typeof RequestData.amount);

					let Handler = {
						responseHandler: function (BOLT) {
							console.log(BOLT.response.txnStatus);
						},
						catchException: function (BOLT) {
							alert(BOLT.message);
						},
					};

					bolt.launch(RequestData, Handler);
				},
				dataType: 'json',
			});

		{% else %}

			location.href = "{% url 'account_signin' %}";

		{% endif %}

		});
	</script>

{% endblock %}